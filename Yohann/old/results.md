# Results 1: ERC LOWV.L
start_date = '2020-01-01'
end_date = '2023-12-31'
tickers = ['SPHQ', 'IVE', 'SPYD', 'LOWV.L', 'SPMO']
| i   | j   | Return   | Average Volatility | Average Sharpe Ratio |
|-----|-----|----------|---------------------|----------------------|
| 5   | 22  | 33.82%   | 14.19%              | 2.53                 |
| 5   | 44  | 37.79%   | 14.18%              | 2.17                 |
| 5   | 66  | 76.01%   | 12.55%              | 2.65                 |
| 5   | 126 | 47.07%   | 11.58%              | 2.48                 |
| 5   | 252 | 25.19%   | 11.63%              | 2.07                 |
| 10  | 22  | 31.75%   | 14.97%              | 1.81                 |
| 10  | 44  | 38.24%   | 14.65%              | 1.49                 |
| 10  | 66  | 71.71%   | 13.28%              | 1.79                 |
| 10  | 126 | 42.97%   | 12.26%              | 1.68                 |
| 10  | 252 | 25.38%   | 12.22%              | 1.46                 |
| 22  | 22  | 29.14%   | 15.60%              | 1.18                 |
| 22  | 44  | 33.01%   | 15.32%              | 1.22                 |
| 22  | 66  | 70.60%   | 13.78%              | 1.31                 |
| 22  | 126 | 36.94%   | 12.47%              | 1.56                 |
| 22  | 252 | 25.05%   | 12.58%              | 1.10                 |
| 44  | 44  | 27.67%   | 15.80%              | 0.90                 |
| 44  | 66  | 71.06%   | 14.09%              | 1.12                 |
| 44  | 126 | 40.62%   | 12.78%              | 1.30                 |
| 44  | 252 | 24.99%   | 12.73%              | 0.91                 |


# Results 2: ERC SPLV
start_date = '2020-01-01'
end_date = '2023-12-31'
tickers = ['SPHQ', 'IVE', 'SPYD', 'SPLV', 'SPMO']
| i   | j   | Return   | Average Volatility | Average Sharpe Ratio |
|-----|-----|----------|---------------------|----------------------|
| 5   | 22  | 41.30%   | 15.98%              | 2.38                 |
| 5   | 44  | 53.95%   | 15.79%              | 2.13                 |
| 5   | 66  | 75.13%   | 14.10%              | 2.73                 |
| 5   | 126 | 54.45%   | 13.21%              | 2.62                 |
| 5   | 252 | 31.90%   | 13.03%              | 1.75                 |
| 10  | 22  | 41.27%   | 16.54%              | 1.92                 |
| 10  | 44  | 53.53%   | 16.37%              | 1.79                 |
| 10  | 66  | 73.82%   | 14.71%              | 1.69                 |
| 10  | 126 | 53.00%   | 13.77%              | 1.59                 |
| 10  | 252 | 31.93%   | 13.50%              | 1.63                 |
| 22  | 22  | 34.24%   | 17.17%              | 1.34                 |
| 22  | 44  | 45.80%   | 16.88%              | 1.42                 |
| 22  | 66  | 68.66%   | 15.00%              | 1.47                 |
| 22  | 126 | 47.13%   | 14.07%              | 1.16                 |
| 22  | 252 | 30.74%   | 14.01%              | 1.00                 |
| 44  | 44  | 38.15%   | 17.62%              | 1.00                 |
| 44  | 66  | 69.61%   | 15.38%              | 1.07                 |
| 44  | 126 | 34.54%   | 14.30%              | 0.88                 |
| 44  | 252 | 30.86%   | 14.18%              | 0.88                 |

# Difference between Results 1 and Results 2
| i   | j   | Return Difference (%) | Volatility Difference (%) | Sharpe Ratio Difference |
|-----|-----|-----------------------|---------------------------|-------------------------|
| 5   | 22  | 7.48                  | 1.79                      | -0.15                   |
| 5   | 44  | 16.16                 | 1.61                      | -0.04                   |
| 5   | 66  | -0.88                 | 1.55                      | 0.08                    |
| 5   | 126 | 7.38                  | 1.63                      | 0.14                    |
| 5   | 252 | 6.71                  | 1.40                      | -0.32                   |
| 10  | 22  | 9.52                  | 1.57                      | 0.11                    |
| 10  | 44  | 15.29                 | 1.72                      | 0.30                    |
| 10  | 66  | 2.11                  | 1.43                      | -0.10                   |
| 10  | 126 | 10.03                 | 1.51                      | -0.09                   |
| 10  | 252 | 6.55                  | 1.28                      | 0.17                    |
| 22  | 22  | 5.10                  | 1.57                      | 0.16                    |
| 22  | 44  | 12.79                 | 1.56                      | 0.20                    |
| 22  | 66  | -2.06                 | 1.22                      | 0.16                    |
| 22  | 126 | 10.19                 | 1.60                      | -0.40                   |
| 22  | 252 | 5.69                  | 1.43                      | -0.10                   |
| 44  | 44  | 10.48                 | 1.82                      | 0.10                    |
| 44  | 66  | -1.45                 | 1.29                      | -0.05                   |
| 44  | 126 | -6.08                 | 1.52                      | -0.42                   |
| 44  | 252 | 5.87                  | 1.45                      | -0.03                   |

> The portfolio with SPLV instead of LOWV.L has a higher return and volatility, but the Sharpe ratio seems to be similar (average of -0.0147). I propose to use SPLV.

# Results 3: SPY (benchmark)
start_date = '2020-01-01'
end_date = '2023-12-31'
| i   | j   | Return (%) | Average Volatility (%) | Average Sharpe Ratio |
|-----|-----|------------|------------------------|----------------------|
| 5   | 22  | 53.94      | 18.00                  | 2.29                 |
| 5   | 44  | 70.66      | 17.69                  | 2.22                 |
| 5   | 66  | 89.14      | 16.36                  | 2.54                 |
| 5   | 126 | 59.90      | 15.73                  | 2.41                 |
| 5   | 252 | 33.00      | 15.58                  | 1.76                 |
| 10  | 22  | 53.94      | 18.52                  | 1.85                 |
| 10  | 44  | 70.66      | 18.37                  | 1.94                 |
| 10  | 66  | 87.41      | 16.87                  | 1.90                 |
| 10  | 126 | 58.44      | 16.21                  | 1.78                 |
| 10  | 252 | 33.00      | 16.03                  | 1.50                 |
| 22  | 22  | 47.70      | 19.24                  | 1.42                 |
| 22  | 44  | 63.39      | 18.89                  | 1.53                 |
| 22  | 66  | 82.24      | 17.17                  | 1.59                 |
| 22  | 126 | 52.86      | 16.52                  | 1.34                 |
| 22  | 252 | 32.17      | 16.44                  | 1.20                 |
| 44  | 44  | 55.35      | 19.54                  | 1.17                 |
| 44  | 66  | 82.24      | 17.46                  | 1.27                 |
| 44  | 126 | 38.08      | 16.77                  | 0.99                 |
| 44  | 252 | 32.17      | 16.66                  | 0.98                 |

# Difference between Results 3 and Results 2
| i   | j   | Return Difference (%) | Volatility Difference (%) | Sharpe Ratio Difference |
|-----|-----|-----------------------|--------------------------|-------------------------|
| 5   | 22  | 12.64                 | 2.02                     | -0.09                   |
| 5   | 44  | 16.71                 | 1.90                     | 0.09                    |
| 5   | 66  | 14.01                 | 2.26                     | -0.19                   |
| 5   | 126 | 5.45                  | 2.52                     | -0.21                   |
| 5   | 252 | 1.10                  | 2.55                     | 0.01                    |
| 10  | 22  | 12.67                 | 1.98                     | -0.07                   |
| 10  | 44  | 17.13                 | 1.98                     | 0.15                    |
| 10  | 66  | 13.59                 | 2.16                     | 0.21                    |
| 10  | 126 | 5.44                  | 2.44                     | 0.19                    |
| 10  | 252 | 1.07                  | 2.53                     | -0.13                   |
| 22  | 22  | 13.46                 | 2.07                     | 0.08                    |
| 22  | 44  | 17.59                 | 1.99                     | 0.11                    |
| 22  | 66  | 13.58                 | 2.17                     | 0.12                    |
| 22  | 126 | 5.73                  | 2.45                     | 0.18                    |
| 22  | 252 | 2.07                  | 2.43                     | 0.20                    |
| 44  | 44  | 17.20                 | 1.92                     | 0.17                    |
| 44  | 66  | 12.63                 | 2.08                     | 0.20                    |
| 44  | 126 | 3.54                  | 2.47                     | 0.11                    |
| 44  | 252 | 1.31                  | 2.48                     | 0.10                    |

> On peut se diriger vers un rebalancement tous les 5 jours avec un entraînement sur 66 ou 126 jours.

# Results 4: new points
| i   | j   | Return (%) | Average Volatility (%) | Average Sharpe Ratio |
|-----|-----|------------|------------------------|----------------------|
| 1   | 5   | 42.10      | nan                   | nan                  |
| 1   | 10  | 39.30      | nan                   | nan                  |
| 1   | 22  | 41.66      | nan                   | nan                  |
| 1   | 44  | 53.79      | nan                   | nan                  |
| 1   | 66  | 76.91      | nan                   | nan                  |
| 1   | 126 | 55.64      | nan                   | nan                  |
| 1   | 252 | 32.07      | nan                   | nan                  |
| 2   | 5   | 38.61      | 14.53                 | 29.72                |
| 2   | 10  | 39.13      | 13.28                 | 45.64                |
| 2   | 22  | 41.63      | 13.35                 | 10.18                |
| 2   | 44  | 53.91      | 13.16                 | -44.89               |
| 2   | 66  | 76.94      | 11.33                 | 13.17                |
| 2   | 126 | 55.91      | 10.49                 | 28.39                |
| 2   | 252 | 32.27      | 10.27                 | -33.68               |
| 3   | 5   | 33.79      | 15.38                 | 3.56                 |
| 3   | 10  | 40.12      | 14.80                 | 1.97                 |
| 3   | 22  | 42.61      | 14.82                 | 3.21                 |
| 3   | 44  | 53.48      | 15.33                 | 2.97                 |
| 3   | 66  | 76.93      | 13.25                 | 2.38                 |
| 3   | 126 | 55.56      | 12.40                 | 2.28                 |
| 3   | 252 | 32.10      | 12.45                 | 1.51                 |
| 4   | 5   | 39.90      | 15.99                 | 1.79                 |
| 4   | 10  | 39.41      | 15.48                 | 2.91                 |
| 4   | 22  | 41.18      | 15.54                 | 2.69                 |
| 4   | 44  | 53.33      | 15.26                 | 2.68                 |
| 4   | 66  | 76.52      | 13.70                 | 2.75                 |
| 4   | 126 | 55.47      | 12.76                 | 2.97                 |
| 4   | 252 | 32.26      | 12.73                 | 2.12                 |
| 5   | 5   | 36.52      | 15.95                 | 2.53                 |
| 5   | 10  | 39.93      | 15.95                 | 2.53                 |
| 5   | 22  | 41.30      | 15.98                 | 2.38                 |
| 5   | 44  | 53.95      | 15.79                 | 2.13                 |
| 5   | 66  | 75.13      | 14.10                 | 2.73                 |
| 5   | 126 | 54.45      | 13.21                 | 2.62                 |
| 5   | 252 | 31.90      | 13.03                 | 1.75                 |

# Results 5: new metrics
start_date = '2020-01-01'
end_date = '2023-12-31'
tickers = ['SPHQ', 'IVE', 'SPYD', 'SPLV', 'SPMO']

je pense que le true sharpe ratio aurait du etre divisé par le nombre d'années de return pr que le return soit comparable avec la volatilité qui est elle annualisée

| i   | j   | Return (%) | Average Volatility (%) | Average Sharpe Ratio | Volatility (%) | Sharpe Ratio | True Return (%) | True Volatility (%) | True Sharpe Ratio |
|-----|-----|------------|------------------------|----------------------|----------------|--------------|----------------|---------------------|-------------------|
| 2   | 5   | 38.61      | 14.53                 | 29.72                | 18.59          | 2.08         | 38.61          | 21.55              | 1.79              |
| 2   | 10  | 39.13      | 13.28                 | 45.64                | 19.93          | 1.96         | 39.13          | 21.59              | 1.81              |
| 2   | 22  | 41.63      | 13.35                 | 10.18                | 19.98          | 2.08         | 41.63          | 21.67              | 1.92              |
| 2   | 66  | 76.94      | 11.33                 | 13.17                | 16.36          | 4.70         | 76.94          | 15.99              | 4.81              |
| 3   | 5   | 33.79      | 15.38                 | 3.56                | 18.15          | 1.86         | 33.79          | 21.50              | 1.57              |
| 3   | 10  | 40.12      | 14.80                 | 1.97                | 21.45          | 1.87         | 40.12          | 21.63              | 1.86              |
| 3   | 22  | 42.61      | 14.82                 | 3.21                | 21.53          | 1.98         | 42.61          | 21.70              | 1.96              |
| 3   | 66  | 76.93      | 13.25                 | 2.38                | 15.76          | 4.88         | 76.93          | 15.98              | 4.81              |
| 5   | 5   | 36.52      | 15.95                 | 2.53                | 20.56          | 1.78         | 36.52          | 21.53              | 1.70              |
| 5   | 10  | 39.93      | 15.95                 | 2.53                | 20.69          | 1.93         | 39.93          | 21.57              | 1.85              |
| 5   | 22  | 41.30      | 15.98                 | 2.38                | 18.79          | 2.20         | 41.30          | 21.71              | 1.90              |
| 5   | 66  | 75.13      | 14.10                 | 2.73                | 14.74          | 5.10         | 75.13          | 16.02              | 4.69              |
| 10  | 10  | 38.49      | 16.50                 | 1.72                | 21.30          | 1.81         | 38.49          | 21.61              | 1.78              |
| 10  | 22  | 41.27      | 16.54                 | 1.92                | 20.82          | 1.98         | 41.27          | 21.73              | 1.90              |
| 10  | 66  | 73.82      | 14.71                 | 1.69                | 12.59          | 5.86         | 73.82          | 16.04              | 4.60              |
| 22  | 22  | 34.24      | 17.17                 | 1.34                | 17.18          | 1.99         | 34.24          | 21.81              | 1.57              |
| 22  | 66  | 68.66      | 15.00                 | 1.47                | 15.00          | 4.58         | 68.66          | 16.07              | 4.27              |

> It seemes that the best one is (3,66).

# Results 6: new dates
start_date = '2016-01-01'
end_date = '2019-12-31'
tickers = ['SPHQ', 'IVE', 'SPYD', 'SPLV', 'SPMO']
| i   | j   | Return (%) | Average Volatility (%) | Average Sharpe Ratio | Volatility (%) | Sharpe Ratio | True Return (%) | True Volatility (%) | True Sharpe Ratio |
|-----|-----|------------|------------------------|----------------------|----------------|--------------|----------------|---------------------|-------------------|
| 2   | 5   | 78.02      | 7.16                  | -25.10               | 11.38          | 6.86         | 78.02          | 11.16              | 6.99              |
| 2   | 10  | 67.60      | 7.33                  | 5.57                 | 10.17          | 6.64         | 67.60          | 10.64              | 6.35              |
| 2   | 22  | 70.00      | 7.31                  | 5.53                 | 10.06          | 6.96         | 70.00          | 10.56              | 6.63              |
| 2   | 66  | 58.53      | 7.25                  | 14.89                | 9.77           | 5.99         | 58.53          | 10.36              | 5.65              |
| 3   | 5   | 77.54      | 8.24                  | 5.21                 | 10.60          | 7.32         | 77.54          | 10.88              | 7.13              |
| 3   | 10  | 71.36      | 7.89                  | 4.17                 | 10.48          | 6.81         | 71.36          | 10.66              | 6.70              |
| 3   | 22  | 71.87      | 7.79                  | 3.51                 | 10.45          | 6.88         | 71.87          | 10.56              | 6.81              |
| 3   | 66  | 58.94      | 7.83                  | 5.08                 | 9.81           | 6.01         | 58.94          | 10.37              | 5.68              |
| 5   | 5   | 73.80      | 8.57                  | 3.60                 | 10.20          | 7.23         | 73.80          | 10.72              | 6.89              |
| 5   | 10  | 71.48      | 8.52                  | 3.36                 | 10.13          | 7.05         | 71.48          | 10.62              | 6.73              |
| 5   | 22  | 72.71      | 8.36                  | 3.35                 | 10.00          | 7.27         | 72.71          | 10.57              | 6.88              |
| 5   | 66  | 58.02      | 8.40                  | 3.92                 | 9.37           | 6.19         | 58.02          | 10.38              | 5.59              |
| 10  | 10  | 71.09      | 8.98                  | 2.81                 | 10.31          | 6.90         | 71.09          | 10.66              | 6.67              |
| 10  | 22  | 71.39      | 8.94                  | 2.69                 | 8.91           | 8.01         | 71.39          | 10.41              | 6.86              |
| 10  | 66  | 57.22      | 8.80                  | 2.87                 | 9.28           | 6.17         | 57.22          | 10.41              | 5.50              |
| 22  | 22  | 67.00      | 9.40                  | 2.19                 | 10.66          | 6.28         | 67.00          | 10.50              | 6.38              |
| 22  | 66  | 56.18      | 9.31                  | 2.12                 | 10.72          | 5.24         | 56.18          | 10.43              | 5.38              |

> (3,5) ou (5,22) à la limite

# Results 7: new dates
start_date = '2013-01-01'
end_date = '2024-10-31'
| i   | j   | Return (%) | Average Volatility (%) | Average Sharpe Ratio | Volatility (%) | Sharpe Ratio | True Return (%) | True Volatility (%) | True Sharpe Ratio |
|-----|-----|------------|------------------------|----------------------|----------------|--------------|----------------|---------------------|-------------------|
| 2   | 5   | 206.34     | 10.07                 | 6.36                 | 15.26          | 13.52         | 206.34         | 16.38              | 12.59             |
| 2   | 22  | 190.57     | 10.29                 | -3.45                | 14.77          | 12.90         | 190.57         | 16.33              | 11.67             |
| 2   | 66  | 200.34     | 10.35                 | 4.94                 | 14.85          | 13.49         | 200.34         | 16.42              | 12.20             |
| 3   | 5   | 193.87     | 11.26                 | 3.54                 | 15.39          | 12.60         | 193.87         | 16.46              | 11.77             |
| 3   | 22  | 186.22     | 11.30                 | 3.64                 | 14.28          | 13.04         | 186.22         | 16.32              | 11.41             |
| 3   | 66  | 201.73     | 11.12                 | 4.17                 | 16.24          | 12.42         | 201.73         | 16.43              | 12.28             |
| 5   | 5   | 177.06     | 11.97                 | 2.90                 | 15.52          | 11.41         | 177.06         | 16.41              | 10.79             |
| 5   | 22  | 193.48     | 11.88                 | 2.85                 | 14.40          | 13.43         | 193.48         | 16.34              | 11.84             |
| 5   | 66  | 201.55     | 11.92                 | 3.14                 | 13.60          | 14.82         | 201.55         | 16.43              | 12.27             |
| 10  | 22  | 192.46     | 12.42                 | 2.14                 | 13.09          | 14.70         | 192.46         | 16.30              | 11.80             |
| 10  | 66  | 201.97     | 12.35                 | 2.53                 | 14.28          | 14.14         | 201.97         | 16.44              | 12.29             |
| 22  | 22  | 183.47     | 12.77                 | 1.88                 | 12.15          | 15.10         | 183.47         | 16.30              | 11.25             |
| 22  | 66  | 202.59     | 12.84                 | 2.03                 | 12.15          | 16.67         | 202.59         | 16.44              | 12.33             |
| 44   | 66   | 203.23     | 13.21                 | 1.73                 | 11.61          | 17.51         | 203.23         | 16.46              | 12.35             |
| 44   | 126  | 165.97     | 13.22                 | 1.72                 | 12.44          | 13.34         | 165.97         | 16.67              | 9.96              |
| 66   | 126  | 169.09     | 13.82                 | 1.48                 | 12.91          | 13.10         | 169.09         | 16.67              | 10.14             |
| 126  | 252  | 164.72     | 14.66                 | 1.38                 | 13.56          | 12.15         | 164.72         | 17.10              | 9.64              |
| 252  | 252  | 162.90     | 15.11                 | 1.34                 | 16.66          | 9.78          | 162.90         | 17.14              | 9.50              |

> Je pense que le fait que les (.,66) soient élevés vient d'un "biais" entre 2020 et 2023 (pcq ce n'était pas du tout présent avant). Si on exclut ceux-là, on semble voir une tendance qui viserait à privilégier des rebalancements plus fréquents. Le (2,5) présente le meilleur sharpe ratio et est probablement le plus robuste. Si on veut augmenter la fréquence, je pense que le mieux c'est de prendre un (5,22).

# Results 8
full, (2,5)
Annualized Returns, Volatility and Sharpe Ratio
Risk Parity: 9.51%, 19.05%, 0.50
Equal Weight: 9.38%, 19.41%, 0.48
SPY: 11.56%, 20.42%, 0.57
Min Variance: 8.22%, 18.92%, 0.43

precovid, (2,5)
Annualized Returns, Volatility and Sharpe Ratio
Risk Parity: 9.67%, 12.83%, 0.75
Equal Weight: 9.73%, 13.31%, 0.73
SPY: 10.37%, 15.03%, 0.69
Min Variance: 8.84%, 12.00%, 0.74

full, (5,22)
Annualized Returns, Volatility and Sharpe Ratio
Risk Parity: 9.60%, 19.16%, 0.50
Equal Weight: 9.46%, 19.49%, 0.49
SPY: 11.64%, 20.49%, 0.57
Min Variance: 8.08%, 18.72%, 0.43

precovid, (5,22)
Annualized Returns, Volatility and Sharpe Ratio
Risk Parity: 9.67%, 12.95%, 0.75
Equal Weight: 10.10%, 13.44%, 0.75
SPY: 10.68%, 15.16%, 0.70
Min Variance: 9.28%, 11.71%, 0.79

full, (22,66)
Annualized Returns, Volatility and Sharpe Ratio
Risk Parity: 10.01%, 19.19%, 0.52
Equal Weight: 10.05%, 19.48%, 0.52
SPY: 12.49%, 20.44%, 0.61
Min Variance: 9.78%, 18.21%, 0.54

precovid, (22,66)
Annualized Returns, Volatility and Sharpe Ratio
Risk Parity: 12.50%, 12.01%, 1.04
Equal Weight: 12.51%, 12.54%, 1.00
SPY: 13.18%, 14.18%, 0.93
Min Variance: 13.68%, 10.73%, 1.27

> Je pense que ça confirme que le mieux c'est (2,5) mais la partie covid fausse les résultats parce que la tech a surperformé et que le SPY est très tech et avec un ERC je pense qu'on réduit l'expo tech.